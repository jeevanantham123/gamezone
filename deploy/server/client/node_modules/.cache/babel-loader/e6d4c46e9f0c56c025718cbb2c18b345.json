{"ast":null,"code":"import _classCallCheck from\"/home/system1/Documents/React/deploy/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/system1/Documents/React/deploy/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/system1/Documents/React/deploy/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/system1/Documents/React/deploy/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/system1/Documents/React/deploy/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'../css/winner.css';import history from'../history';import{Button,FormGroup,FormControl,ControlLabel,HelpBlock}from\"react-bootstrap\";import{Banner}from'./userhome';import bg from'../images/confetti-3-x.png';import axios from'axios';var Winner=/*#__PURE__*/function(_Component){_inherits(Winner,_Component);var _super=_createSuper(Winner);function Winner(props){var _this;_classCallCheck(this,Winner);_this=_super.call(this,props);if(_this.props.location.state===undefined){window.location.href=\"/\";}_this.state={email:'',lsCheck:''};_this.handleChangeEmail=_this.handleChangeEmail.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Winner,[{key:\"handleChangeEmail\",value:function handleChangeEmail(e){e.preventDefault();this.setState({email:e.target.value});}},{key:\"handleSubmit\",value:function handleSubmit(e){e.preventDefault();var emailformat=/[a-z0-9]+@[a-z]+.[a-z]/;if(emailformat.test(this.state.email)){this.setState({err:''});window.localStorage.setItem('email',this.state.email);var body={email:this.state.email,gameDetails:{gameName:this.props.location.state.gname,count:window.localStorage.getItem(this.props.location.state.gname)}};axios.post('api/game/winner',body,{withCredentials:true}).then(function(res){if(res.data==='success'){history.push('/');}});}else{this.setState({err:'enter a valid email!'});}}},{key:\"componentWillMount\",value:function componentWillMount(){if(this.props.location.state===undefined){window.location.href=\"/\";}if(window.localStorage.getItem('email')!==null){var body={email:window.localStorage.getItem('email'),gameDetails:{gameName:this.props.location.state.gname,count:window.localStorage.getItem(this.props.location.state.gname)}};axios.post('api/game/winner',body,{withCredentials:true}).then(function(res){if(res.data==='success'){history.push('/');}});}if(window.localStorage.getItem(this.props.location.state.gname)===null){window.localStorage.setItem(this.props.location.state.gname,1);}else{var count=window.localStorage.getItem(this.props.location.state.gname);count++;window.localStorage.setItem(this.props.location.state.gname,count);}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"winner\"},/*#__PURE__*/React.createElement(Banner,null),/*#__PURE__*/React.createElement(\"div\",{className:\"inner-winner-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inner-winner\"},/*#__PURE__*/React.createElement(\"img\",{src:bg,alt:\"\"}),/*#__PURE__*/React.createElement(\"p\",{id:\"p1\"},\"Winner!\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{id:\"p2\"},\"Enter your email to claim rewards!\")),/*#__PURE__*/React.createElement(\"div\",{id:\"form\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(HelpBlock,null,/*#__PURE__*/React.createElement(\"p\",{className:\"text-warning\"},this.state.err)),/*#__PURE__*/React.createElement(FormGroup,{controlId:\"email\",bsSize:\"large\"},/*#__PURE__*/React.createElement(ControlLabel,null,\"Email\"),/*#__PURE__*/React.createElement(FormControl,{autoFocus:true,type:\"email\",value:this.state.email,onChange:function onChange(e){return _this2.handleChangeEmail(e);}})),/*#__PURE__*/React.createElement(\"div\",{id:\"submit\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",onClick:this.handleSubmit},\"Submit\"))))));}}]);return Winner;}(Component);export{Winner as default};","map":{"version":3,"sources":["/home/system1/Documents/React/deploy/server/client/src/components/winner.js"],"names":["React","Component","history","Button","FormGroup","FormControl","ControlLabel","HelpBlock","Banner","bg","axios","Winner","props","location","state","undefined","window","href","email","lsCheck","handleChangeEmail","bind","handleSubmit","e","preventDefault","setState","target","value","emailformat","test","err","localStorage","setItem","body","gameDetails","gameName","gname","count","getItem","post","withCredentials","then","res","data","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport '../css/winner.css';\nimport history from '../history';\nimport { Button, FormGroup, FormControl, ControlLabel, HelpBlock} from \"react-bootstrap\";\nimport {Banner} from './userhome';\nimport bg from '../images/confetti-3-x.png';\nimport axios from 'axios';\nexport default class Winner extends Component {\n    constructor(props){\n        super(props);\n        if(this.props.location.state === undefined){\n            window.location.href =\"/\";\n        } \n        this.state = {\n            email:'',\n            lsCheck:''\n        };\n        this.handleChangeEmail = this.handleChangeEmail.bind(this);\n        this.handleSubmit=this.handleSubmit.bind(this);\n    }\n    handleChangeEmail(e){\n        e.preventDefault();\n        this.setState({\n            email : e.target.value\n        });\n    }\n    handleSubmit(e){\n        e.preventDefault();\n        var emailformat = /[a-z0-9]+@[a-z]+.[a-z]/;\n        if(emailformat.test(this.state.email)){\n            this.setState({\n                err: ''\n            });\n            window.localStorage.setItem('email',this.state.email);\n            const body = {\n                email: this.state.email,\n                gameDetails : {\n                    gameName:this.props.location.state.gname,\n                    count:window.localStorage.getItem(this.props.location.state.gname)\n                }\n            };\n            axios.post('api/game/winner',body,{\n                withCredentials:true\n            })\n            .then(res => {\n                if(res.data === 'success'){\n                    history.push('/');\n                }\n            });          \n        }\n        else{\n            this.setState({\n                err:'enter a valid email!'\n            })\n        }\n    }\n    componentWillMount(){\n        if(this.props.location.state === undefined){\n            window.location.href =\"/\";\n        } \n        if(window.localStorage.getItem('email') !== null){\n            const body = {\n                email: window.localStorage.getItem('email'),\n                gameDetails : {\n                    gameName:this.props.location.state.gname,\n                    count:window.localStorage.getItem(this.props.location.state.gname)\n                }\n            };\n            axios.post('api/game/winner',body,{\n                withCredentials:true\n            })\n            .then(res => {\n                if(res.data === 'success'){\n                    history.push('/');\n                }\n            }); \n        }\n    \n        if(window.localStorage.getItem(this.props.location.state.gname) === null){\n            window.localStorage.setItem(this.props.location.state.gname,1);\n        }\n        else{\n            var count = window.localStorage.getItem(this.props.location.state.gname);\n            count ++;\n            window.localStorage.setItem(this.props.location.state.gname,count);\n        }\n    }\n    render() {\n        return (\n            <div className=\"winner\">\n                <Banner/>\n                <div className=\"inner-winner-block\">\n                    <div className=\"inner-winner\">\n                    <img src={bg} alt=\"\"/>\n                    <p id=\"p1\">Winner!</p>\n                    <br/>\n                    <p id=\"p2\">Enter your email to claim rewards!</p>\n                    </div>\n                    <div id=\"form\">\n                    <form>\n                    <HelpBlock>\n                    <p className=\"text-warning\">{this.state.err}</p>\n                    </HelpBlock>\n                    <FormGroup controlId=\"email\" bsSize=\"large\">\n                    <ControlLabel>Email</ControlLabel>\n                    <FormControl\n                        autoFocus\n                        type=\"email\"\n                        value={this.state.email}\n                        onChange={e => this.handleChangeEmail(e)}\n                    />\n                    </FormGroup>\n                    <div id=\"submit\">\n                    <Button  type=\"button\" onClick={this.handleSubmit}>\n                        Submit\n                    </Button>\n                    </div>\n                    </form>               \n                    </div>\n                    </div>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}